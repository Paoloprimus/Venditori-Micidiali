@tailwind base;
@tailwind components;
@tailwind utilities;

/* === Base === */
@layer base {
  html, body { @apply h-full; }
  body {
    margin: 0;
    min-height: 100dvh;
    @apply bg-white text-slate-900 antialiased;
    font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    font-size: 15px;   /* compatto */
    line-height: 1.35; /* compatto */
  }
  a { @apply text-blue-600; }
  button { @apply cursor-pointer; }
}

/* === Componenti (look “tailwind”) === */
@layer components {
  /* Topbar: minimal */
  .topbar {
    @apply sticky top-0 z-20 flex items-center gap-2 h-11 px-3 border-b border-slate-200 bg-white;
  }
  .topbar .spacer { @apply flex-1; }
  .title { @apply font-semibold text-sm tracking-tight; }
  .badge { @apply text-[11px] bg-white border border-slate-200 rounded-full px-2 py-0.5 text-slate-600; }
  .hr { @apply h-px bg-slate-200 my-2; }

  /* Layout */
  .container { @apply max-w-3xl mx-auto px-3; }
  .thread    { @apply flex flex-col gap-2 p-2; }
  .helper    { @apply text-slate-600 text-xs bg-slate-50 border border-slate-200 rounded-md px-2 py-1.5; }

  /* Messaggi: “bubble” tailwind-style */
  .msg {
    @apply max-w-[90%] rounded-lg px-3 py-2 text-sm leading-tight border;
  }
  /* Assistant = neutro */
  .thread .msg:not(.me) { @apply bg-slate-100 border-slate-200 text-slate-800; }
  /* User = azzurrino */
  .msg.me { @apply self-end bg-blue-50 border-blue-200 text-slate-900 text-right; }

  /* Composer: semplice e denso */
  .composer {
    @apply sticky bottom-0 z-10 bg-white border-t border-slate-200 px-3 py-2 grid gap-2;
  }
  .composer .inputwrap { @apply block; }
  .composer textarea {
    @apply w-full min-h-10 max-h-32 p-2.5 rounded-md
           border border-slate-300 bg-white text-slate-900 text-sm leading-tight
           resize-none overflow-auto
           focus:outline-none focus:ring-2 focus:ring-blue-500;
  }
  .composer .actions { @apply flex gap-2 justify-between items-center; }
  .composer .actions .left,
  .composer .actions .right { @apply flex gap-2 items-center; }

  /* Bottoni: tailwind default */
  .btn {
    @apply bg-blue-600 text-white px-3 py-1.5 rounded-md
           hover:bg-blue-700 active:translate-y-px transition;
    border: none;
  }
  .iconbtn {
    @apply bg-white text-slate-700 px-2 py-1 rounded-md
           border border-slate-300 hover:bg-slate-100 active:translate-y-px transition;
  }

  /* Drawer sinistro/destro: puliti, senza ombre */
  .drawer {
    @apply fixed top-0 bottom-0 w-80 bg-white border border-slate-200 z-20 overflow-auto
           -translate-x-full transition-transform duration-200 left-0;
  }
  .drawer.open { @apply translate-x-0; }
  .drawer.right { @apply left-auto right-0 translate-x-full; }
  .drawer.right.open { @apply translate-x-0; }

  .list { @apply p-3 flex flex-col gap-2; }
  .list .row {
    @apply bg-slate-50 border border-slate-200 rounded-md px-3 py-2
           hover:bg-slate-100 hover:border-slate-300 transition;
  }

  /* Top sheet (se usato) */
  .topsheet {
    @apply fixed left-0 right-0 top-0 h-[70vh] max-h-[80dvh] bg-white border-b border-slate-200 z-20
           overflow-auto -translate-y-full transition-transform duration-200;
  }
  .topsheet.open { @apply translate-y-0; }
}

/* === Utilities === */
@layer utilities {
  /* placeholder per eventuali shadows, lasciate vuote per look piatto */
  .shadow-soft { box-shadow: none !important; }
}
